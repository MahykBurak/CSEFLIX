import type { NextPage } from 'next'
import Head from 'next/head'
import Banner from '../components/Banner/Banner'
import Layout from '../components/common/Layout'
import MovieCard from '../components/MovieCard/MovieCard'
import MovieSlider from '../components/MovieSlider/MovieSlider'
import { trpc } from '../utils/trpc'

const Home: NextPage = () => {
  const {
    data: trend,
    isLoading,
    isSuccess,
  } = trpc.movieRouter.getTrendingMovies.useQuery()
  const {
    data: topRated,
    isLoading: topLoading,
    isSuccess: topSuccess,
  } = trpc.movieRouter.getUpcomingMovies.useQuery()
  console.log(topRated)
  return (
    <Layout title="TITLE">
      <Head>
        <title>Create T3 App</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {isSuccess && trend && (
        <div className="-mt-24">
          <Banner
            movie={
              trend.results[
                Math.floor(Math.random() * trend.results.length - 1)
              ]!
            }
          />
        </div>
      )}
      <div className="space-y-10">
        {isSuccess && trend && (
          <MovieSlider label="IN CINEMAS" movies={trend.results} />
        )}
        {topSuccess && topRated && (
          <MovieSlider label="UPCOMING" movies={topRated.results} />
        )}
      </div>
    </Layout>
  )
}

export default Home
